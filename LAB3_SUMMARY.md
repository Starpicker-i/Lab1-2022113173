# Lab3 代码评审与单元测试实验总结

## 实验目标

本实验的目标是针对Python项目实现代码评审和单元测试，对应Java实验指导书中的要求。主要包括：

1. 使用代码评审工具检查代码质量
2. 实现黑盒测试和白盒测试
3. 生成测试覆盖率报告和评估报告

## 实验内容

### 1. 代码评审部分

针对Java中的CheckStyle和SpotBugs工具，我们使用了以下Python工具替代：

- **Pylint**：检查代码风格和规范，相当于Java中的CheckStyle
- **Flake8**：结合了PyFlakes、pycodestyle和McCabe复杂度检查
- **Bandit**：检查安全漏洞，相当于Java中的SpotBugs

创建了相应的配置文件：
- `.pylintrc`：Pylint配置文件
- `.flake8`：Flake8配置文件
- `.bandit`：Bandit配置文件

实现了代码评审脚本`code_review.py`，可以运行各种代码评审工具。

### 2. 单元测试部分

使用pytest框架实现了两种类型的测试：

- **黑盒测试**：`test_blackbox.py`，测试函数的功能，不关注内部实现
- **白盒测试**：`test_whitebox.py`，使用基本路径法测试函数的内部实现

创建了测试运行脚本`run_tests.py`，可以运行测试并生成覆盖率报告。

### 3. 测试评估

创建了运行脚本`run_with_logs.py`，可以运行代码评审和测试，并将结果保存到日志文件中。

实现了评估报告生成脚本`generate_report.py`，可以解析日志文件，生成HTML格式的评估报告，包含图表展示。

## 实验结果

1. 代码评审：
   - Pylint评分：5.70/10
   - 发现了大量代码风格问题，主要是空行和空格使用不规范
   - 没有发现安全漏洞

2. 单元测试：
   - 黑盒测试：5/5通过
   - 白盒测试：4/4通过
   - 总测试通过率：100%

3. 测试覆盖率：
   - 生成了HTML格式的覆盖率报告

## 实验心得

1. Python的代码评审工具与Java工具有相似之处，但也有各自的特点
2. 白盒测试中需要考虑大小写敏感性问题
3. 使用mock可以有效地测试随机行为
4. 测试覆盖率报告对于发现未测试的代码路径非常有帮助
5. 图形化报告可以直观地展示代码质量和测试情况

## 改进方向

1. 修复代码中的风格问题，提高Pylint评分
2. 增加更多的测试用例，覆盖更多的边界条件
3. 改进报告生成脚本，支持更多的图表类型和分析维度 